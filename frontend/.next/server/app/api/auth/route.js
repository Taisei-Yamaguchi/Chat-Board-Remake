"use strict";(()=>{var e={};e.id=932,e.ids=[932],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6758:(e,t,o)=>{o.r(t),o.d(t,{headerHooks:()=>v,originalPathname:()=>x,patchFetch:()=>y,requestAsyncStorage:()=>m,routeModule:()=>f,serverHooks:()=>j,staticGenerationAsyncStorage:()=>k,staticGenerationBailout:()=>b});var r={};o.r(r),o.d(r,{GET:()=>h,POST:()=>g});var a=o(5419),s=o(9108),n=o(9678),i=o(3762);o(8616);var c=o(8984),u=o(4183),l=o(2053);let d=(0,i.j)("320a78fdb908b9e2396a36fc3a70bc17837c9268",p);async function p(e){return(await fetch(`${u.S}/accounts/login/`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)})).json()}async function g(e){try{let{formData:t}=await e.json(),o=await d(t);if(o.error)throw Error("Failed to login");let r=JSON.stringify(o),a=c.NextResponse.json({success:!0,dataAsString:r},{status:200});return a.cookies.set("loginId",o.account.id.toString()),a.cookies.set("loginUsername",o.account.username),a.cookies.set("loginToken",o.token),a}catch(e){return console.error("Login error:",e.message),c.NextResponse.json({success:!1,error:"Internal server error"},{status:500})}}async function h(e){try{let t=e.cookies.get("loginId")?.value,o=e.cookies.get("loginUsername")?.value,r=e.cookies.get("loginToken")?.value,a=t&&o?{id:parseInt(t),username:o}:null;return c.NextResponse.json({account:a,token:r||null},{status:200})}catch(e){return console.error("Error while fetching login user info:",e.message),c.NextResponse.json({success:!1,error:"Failed to fetch login user info"},{status:500})}}(0,l.h)([d]),(0,i.j)("bff60c88f65353016d061f9116df47d68ab01171",d),(0,l.h)([g,h]),(0,i.j)("036335218779b32593e0068ec41141b07e81d0cf",g),(0,i.j)("5e64fa59897cb85cabdc2ba1865a39d5021f3f72",h);let f=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/auth/route",pathname:"/api/auth",filename:"route",bundlePath:"app/api/auth/route"},resolvedPagePath:"/Users/taisei_yamaguchi/Desktop/Chat-Board-Remake/frontend/src/app/api/auth/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:m,staticGenerationAsyncStorage:k,serverHooks:j,headerHooks:v,staticGenerationBailout:b}=f,x="/api/auth/route";function y(){return(0,n.patchFetch)({serverHooks:j,staticGenerationAsyncStorage:k})}},4183:(e,t,o)=>{o.d(t,{S:()=>r});let r="https://chat.taiseiyama.com/django"}};var t=require("../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),r=t.X(0,[638,229],()=>o(6758));module.exports=r})();