(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{9187:function(e,r,s){Promise.resolve().then(s.bind(s,8980))},3472:function(e,r,s){"use strict";Object.defineProperty(r,"$",{enumerable:!0,get:function(){return t}});let a=s(5355);function t(e){let{createServerReference:r}=s(6671);return r(e,a.callServer)}},8980:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return g}});var a=s(7437),t=s(2265),n=s(7907),o=s(8693),l=s(1991),i=s(3167);s(5355);var d=(0,s(3472).$)("b5fed6173440fafc43a14efc476a80f94ef5a87c"),c=s(1841),u=s(644);let m=async()=>{let e=await fetch("".concat(u.S,"/accounts/list/"),{method:"GET",headers:{"Content-Type":"application/json"}});return await e.json()},p=l.Ry().shape({username:l.Z_().matches(/^[a-zA-Z0-9@/./+/-/_]{1,30}$/,"Username must contain only letters, digits, and @/./+/-/_").required("username is required!"),password:l.Z_().min(6,"Password must be at least 6 characters").required("Password is required !"),confirm_password:l.Z_().oneOf([l.iH("password")],"Passwords must match").required("Confirm Password is required!")}),h={username:"",password:"",confirm_password:""};var g=()=>{let e=(0,n.useRouter)();(0,c.TL)();let[r,s]=(0,t.useState)({message:"",type:""}),[l,u]=(0,t.useState)([]);(0,t.useEffect)(()=>{(async()=>{try{let e=await m();u(e.accounts)}catch(e){console.error("Error fetching recommend snacks:",e)}})()},[]);let g=(0,o.TA)({initialValues:h,validationSchema:p,onSubmit:async r=>{if(s({message:"Signup processing",type:"load"}),r.password!==r.confirm_password){s({message:"Passwords do not match",type:"error"});return}if(l.some(e=>e.username===r.username)){s({message:"This username is already used.",type:"error"});return}let{confirm_password:a,...t}=r,n=await d(t);if(n.error)s({message:n.error,type:"error"});else{try{let a=await fetch("/api/auth/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({formData:r})});if(!a.ok)throw Error("Failed to login");let t=await a.json();if(t.error){s({message:t.error,type:"error"});return}e.push("/home")}catch(e){console.error("Login error:",e),s({message:"Failed to login",type:"error"})}s({message:n.message,type:"success"}),setTimeout(()=>{e.push("/home")},100)}setTimeout(()=>s({message:"",type:""}),200),g.resetForm()}}),f=e=>{let r=e.target.value;Array.isArray(l)&&(l.some(e=>e.username===r)?s({message:"This username is already taken",type:"error"}):s({message:"",type:""}))};return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-screen",children:[r.message&&(0,a.jsx)("div",{className:(0,i.Z)("fixed z-[100] top-5 right-5 w-fit text-white text-lg px-5 py-3 rounded-md mb-5 ",{"bg-red-500":"error"===r.type,"bg-green-500":"load"===r.type}),children:"load"===r.type?(0,a.jsxs)(a.Fragment,{children:[r.message,(0,a.jsx)("span",{className:"loading loading-dots loading-lg"})]}):(0,a.jsx)(a.Fragment,{children:r.message})}),(0,a.jsxs)("div",{className:"card shrink-0 w-full max-w-sm shadow-2xl bg-base-100",children:[(0,a.jsx)("h1",{className:"self-center text-xl",children:"SignUp"}),(0,a.jsxs)("form",{onSubmit:g.handleSubmit,className:"card-body",children:[(0,a.jsxs)("div",{className:"form-control",children:[(0,a.jsx)("label",{className:"label",children:(0,a.jsx)("span",{className:"label-text",children:"Username"})}),(0,a.jsx)("input",{id:"username",name:"username",type:"text",value:g.values.username,onChange:e=>{g.handleChange(e),f(e)},onBlur:g.handleBlur,placeholder:"Username",className:(0,i.Z)("input input-bordered block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 pl-2",{"border-2 border-red-500 bg-red-100 text-red-800":g.touched.username&&g.errors.username}),required:!0}),g.errors.username&&g.touched.username&&(0,a.jsx)("p",{className:"text-red-500 ml-1 my-3",children:g.errors.username})]}),(0,a.jsxs)("div",{className:"form-control",children:[(0,a.jsx)("label",{className:"label",children:(0,a.jsx)("span",{className:"label-text",children:"Password"})}),(0,a.jsx)("input",{id:"password",name:"password",type:"password",value:g.values.password,onChange:g.handleChange,onBlur:g.handleBlur,placeholder:"Password",className:(0,i.Z)("input input-bordered  block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 pl-2",{"border-2 border-red-500 bg-red-100 text-red-800":g.touched.password&&g.errors.password})}),g.errors.password&&g.touched.password&&(0,a.jsx)("p",{className:"text-red-500 ml-1 my-3",children:g.errors.password})]}),(0,a.jsxs)("div",{className:"form-control",children:[(0,a.jsx)("label",{className:"label",children:(0,a.jsx)("span",{className:"label-text",children:"Password (Confirm)"})}),(0,a.jsx)("input",{id:"confirm_password",name:"confirm_password",type:"password",value:g.values.confirm_password,onChange:g.handleChange,onBlur:g.handleBlur,placeholder:"Password (Confirm)",className:(0,i.Z)("input input-bordered  block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 pl-2",{"border-2 border-red-500 bg-red-100 text-red-800":g.touched.confirm_password&&g.errors.confirm_password})}),g.errors.confirm_password&&g.touched.confirm_password&&(0,a.jsx)("p",{className:"text-red-500 ml-1 my-3",children:g.errors.confirm_password}),(0,a.jsx)("label",{className:"label",children:(0,a.jsx)("a",{href:"/home",className:"label-text-alt link link-hover",children:"Just review without signup"})}),(0,a.jsx)("label",{className:"label",children:(0,a.jsx)("a",{href:"/login",className:"label-text-alt link link-hover",children:"Login"})})]}),(0,a.jsx)("button",{type:"submit",className:"btn btn-ghost",children:"Sign Up"})]})]})]})}},644:function(e,r,s){"use strict";s.d(r,{S:function(){return a}});let a="https://chat.taiseiyama.com/django"},3136:function(e,r,s){"use strict";s.r(r);var a=s(7437),t=s(828),n=s(1841);r.default=e=>{let{children:r}=e;return(0,a.jsx)(t.zt,{store:n.w_,children:r})}},1841:function(e,r,s){"use strict";s.d(r,{w_:function(){return d},TL:function(){return c},CG:function(){return u}});var a=s(828),t=s(5972),n=s(9683),o=s(2251),l=s(6212),i=s(6674);s(3136);let d=(0,t.xC)({reducer:{loginUserSlice:n.ZP,reloadSlice:o.ZP,searchBoardResultSlice:l.ZP,commentReplySlice:i.ZP}}),c=a.I0,u=a.v9},6674:function(e,r,s){"use strict";s.d(r,{VH:function(){return t}});let a=(0,s(5972).oM)({name:"commentReplySlice",initialState:{commentReply:null},reducers:{setCommentReply(e,r){e.commentReply=r.payload}}}),{setCommentReply:t}=a.actions;r.ZP=a.reducer},9683:function(e,r,s){"use strict";s.d(r,{hv:function(){return t},o4:function(){return n}});let a=(0,s(5972).oM)({name:"loginUser",initialState:{account:null,token:null},reducers:{setAccount(e,r){e.account=r.payload},setToken(e,r){e.token=r.payload}}}),{setAccount:t,setToken:n}=a.actions;r.ZP=a.reducer},2251:function(e,r,s){"use strict";s.d(r,{NH:function(){return t},XX:function(){return n}});let a=(0,s(5972).oM)({name:"Reload",initialState:{reloading:!1,searchLoad:!1},reducers:{setReloading(e,r){e.reloading=r.payload},setSearchLoad(e,r){e.searchLoad=r.payload}}}),{setReloading:t,setSearchLoad:n}=a.actions;r.ZP=a.reducer},6212:function(e,r,s){"use strict";s.d(r,{mu:function(){return t}});let a=(0,s(5972).oM)({name:"searchBoardResult",initialState:{searchBoardResult:[],totalPages:1},reducers:{setSearchBoardResult(e,r){e.searchBoardResult=r.payload},setTotalPages(e,r){e.totalPages=r.payload}}}),{setSearchBoardResult:t,setTotalPages:n}=a.actions;r.ZP=a.reducer}},function(e){e.O(0,[274,181,971,69,744],function(){return e(e.s=9187)}),_N_E=e.O()}]);